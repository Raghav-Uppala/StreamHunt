<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>
  </head>
  <body>
<div class="dropdown">
  <button class="dropdown-toggle">Select Episode</button>
  <div class="dropdown-menu">
    <!-- content will be dynamically injected here -->
  </div>
</div>

<style>
.dropdown {
  position: relative;
  display: inline-block;
  width: 200px;
  font-family: sans-serif;
}

.dropdown-toggle {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
  background: white;
  text-align: left;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  max-height: 0;
  overflow: hidden;
  background: white;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  transition: max-height 0.3s ease;
  z-index: 100;
}

.dropdown-menu.open {
  max-height: 300px; /* enough to show options */
  overflow-y: auto;
}

.dropdown-item {
  padding: 8px 12px;
  cursor: pointer;
}

.dropdown-item:hover {
  background-color: #f0f0f0;
}

.back-button {
  font-weight: bold;
  cursor: pointer;
  padding: 8px 12px;
  border-bottom: 1px solid #ddd;
}

</style>
<script>
const seasons = {
  "Season 1": ["Episode 1", "Episode 2", "Episode 3"],
  "Season 2": ["Episode 1", "Episode 2", "Episode 3", "Episode 4"],
  "Season 3": ["Episode 1", "Episode 2"]
};

const dropdown = document.querySelector(".dropdown");
const toggle = dropdown.querySelector(".dropdown-toggle");
const menu = dropdown.querySelector(".dropdown-menu");

menu.addEventListener("click", e => e.stopPropagation());

let currentSeason = "Season 1";

toggle.addEventListener("click", () => {
  menu.classList.toggle("open");
  showEpisodes(currentSeason);
});

// Show episodes for a season
function showEpisodes(season) {
  currentSeason = season;
  menu.innerHTML = `
    <div class="back-button">‚Üê Back to Seasons</div>
    ${seasons[season].map(ep => `<div class="dropdown-item">${ep}</div>`).join("")}
  `;

  // Back button event
  menu.querySelector(".back-button").addEventListener("click", (e) => {
    e.stopPropagation(); // <- stop the click from bubbling to document
    showSeasons();
  });

  // Episode click events
  menu.querySelectorAll(".dropdown-item").forEach(item => {
    item.addEventListener("click", () => {
      toggle.textContent = `${season} - ${item.textContent}`;
      menu.classList.remove("open");
    });
  });
}

// Show season list
function showSeasons() {
  menu.innerHTML = `
    ${Object.keys(seasons).map(s => `<div class="dropdown-item">${s}</div>`).join("")}
  `;

  menu.querySelectorAll(".dropdown-item").forEach(item => {
    item.addEventListener("click", () => {
      showEpisodes(item.textContent);
    });
  });
}

// Close dropdown if clicking outside
document.addEventListener("click", e => {
  if (!dropdown.contains(e.target)) {
    menu.classList.remove("open");
  }
});

</script>
  </body>
</html>
